<!DOCTYPE html>
<html>
<head>
  <title>Advanced Debug</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
    .card { background: #f5f5f5; border-radius: 5px; padding: 15px; margin-bottom: 20px; }
    button { margin: 5px; padding: 8px 16px; cursor: pointer; }
    .success { color: green; }
    .error { color: red; }
    pre { background: #eee; padding: 10px; overflow: auto; }
  </style>
</head>
<body>
  <h1>GitHub Pages Debugging Tool</h1>
  
  <div class="card">
    <h2>1. Environment Information</h2>
    <div id="env-info"></div>
  </div>
  
  <div class="card">
    <h2>2. Test Asset Loading</h2>
    <button onclick="testAssets()">Test Loading Assets</button>
    <div id="asset-results"></div>
  </div>
  
  <div class="card">
    <h2>3. Directory Contents</h2>
    <p>Note: This is a best-effort attempt to guess what files might be available</p>
    <button onclick="checkCommonFiles()">Check Common Files</button>
    <div id="file-results"></div>
  </div>
  
  <script>
    // Display environment info
    function showEnvInfo() {
      const info = document.getElementById('env-info');
      info.innerHTML = `
        <p><strong>URL:</strong> ${window.location.href}</p>
        <p><strong>User Agent:</strong> ${navigator.userAgent}</p>
        <p><strong>Time:</strong> ${new Date().toString()}</p>
      `;
    }
    
    // Test loading common assets
    async function testAssets() {
      const results = document.getElementById('asset-results');
      results.innerHTML = '<p>Testing asset loading...</p>';
      
      const assets = [
        './index.html',
        './assets/index-B2iB2RgC.js',
        './assets/index-C8DYzFUC.css',
        './vite.svg'
      ];
      
      let html = '';
      
      for (const asset of assets) {
        try {
          const start = performance.now();
          const response = await fetch(asset, { cache: 'no-store' });
          const end = performance.now();
          
          if (response.ok) {
            html += `<p class="success">✓ ${asset} - Loaded in ${Math.round(end-start)}ms</p>`;
          } else {
            html += `<p class="error">✗ ${asset} - Status: ${response.status}</p>`;
          }
        } catch (error) {
          html += `<p class="error">✗ ${asset} - Error: ${error.message}</p>`;
        }
      }
      
      results.innerHTML = html;
    }
    
    // Check for common files
    async function checkCommonFiles() {
      const results = document.getElementById('file-results');
      results.innerHTML = '<p>Checking for common files...</p>';
      
      const commonFiles = [
        './',
        './index.html',
        './assets/',
        './.nojekyll',
        './404.html'
      ];
      
      let html = '';
      
      for (const file of commonFiles) {
        try {
          const response = await fetch(file, { cache: 'no-store' });
          if (response.ok) {
            const text = await response.text();
            const preview = text.length > 100 ? text.substring(0, 100) + '...' : text;
            html += `<p class="success">✓ ${file} - ${response.status} (${text.length} bytes)</p>`;
            html += `<pre>${preview.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</pre>`;
          } else {
            html += `<p class="error">✗ ${file} - Status: ${response.status}</p>`;
          }
        } catch (error) {
          html += `<p class="error">✗ ${file} - Error: ${error.message}</p>`;
        }
      }
      
      results.innerHTML = html;
    }
    
    // Run on load
    showEnvInfo();
  </script>
</body>
</html>
